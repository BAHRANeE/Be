<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù…Ø­ÙˆÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠ</title>
  <style>
    /* Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø© */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Arial', sans-serif;
      background: linear-gradient(to right, #2c3e50, #3498db);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      overflow-x: hidden;
    }
    header {
      width: 100%;
      padding: 20px 0;
      text-align: center;
      background: rgba(0,0,0,0.3);
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      position: sticky;
      top: 0;
      z-index: 100;
    }
    header h1 {
      font-size: 2.5em;
      color: #f39c12;
      animation: slideIn 1s ease-out;
    }
    @keyframes slideIn {
      from { transform: translateY(-50px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    nav {
      margin-top: 10px;
    }
    nav button {
      background: #f39c12;
      border: none;
      padding: 10px 20px;
      margin: 0 5px;
      border-radius: 5px;
      font-size: 1em;
      cursor: pointer;
      transition: background 0.3s, transform 0.3s;
    }
    nav button:hover,
    nav button.active {
      background: #d4ac0d;
      transform: scale(1.05);
    }
    main {
      width: 100%;
      max-width: 800px;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 30px;
    }
    .container {
      background: rgba(255,255,255,0.15);
      padding: 30px;
      border-radius: 15px;
      backdrop-filter: blur(10px);
      box-shadow: 0 0 25px rgba(0,0,0,0.3);
      border: 3px solid #f39c12;
      animation: fadeIn 1s ease-in-out;
      position: relative;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    h2 { margin-bottom: 15px; color: #f1c40f; font-size: 2em; }
    .input-group {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 20px;
    }
    .input-group label {
      margin-bottom: 5px;
      font-size: 1.1em;
      cursor: help;
    }
    .input-group input,
    .input-group select {
      padding: 10px;
      border-radius: 8px;
      border: none;
      width: 80%;
      max-width: 300px;
      font-size: 1em;
      background: rgba(0,0,0,0.6);
      color: #fff;
      text-align: center;
    }
    .input-group input[type="number"]::-webkit-outer-spin-button,
    .input-group input[type="number"]::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    .action-btn {
      background: #f1c40f;
      color: #000;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1em;
      transition: background 0.3s, transform 0.3s;
      margin: 10px;
    }
    .action-btn:hover {
      background: #d4ac0d;
      transform: scale(1.03);
    }
    .reset-btn {
      background: #e74c3c;
      color: #fff;
    }
    .reset-btn:hover {
      background: #c0392b;
    }
    .result-box {
      background: rgba(0,0,0,0.7);
      padding: 20px;
      border-radius: 10px;
      font-size: 1.3em;
      margin-top: 10px;
      position: relative;
      white-space: pre-wrap;
    }
    .copy-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: #f39c12;
      border: none;
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.8em;
      transition: background 0.3s;
    }
    .copy-btn:hover {
      background: #d4ac0d;
    }
    .highlight {
      color: #f39c12;
      font-weight: bold;
    }
    /* ØªØ¨ÙˆÙŠØ¨Ø§Øª */
    .tab { display: none; }
    .tab.active { display: block; }
    /* Ø³Ø¬Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª */
    .history {
      margin-top: 15px;
      background: rgba(0,0,0,0.5);
      padding: 10px;
      border-radius: 8px;
      max-height: 150px;
      overflow-y: auto;
      text-align: right;
      font-size: 0.9em;
    }
    .history h3 {
      margin-bottom: 5px;
      font-size: 1.2em;
      color: #f1c40f;
    }
    .history-entry {
      margin-bottom: 5px;
      border-bottom: 1px dashed #fff;
      padding-bottom: 3px;
    }
    .clear-history {
      background: #e74c3c;
      color: #fff;
      border: none;
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 0.9em;
      cursor: pointer;
      transition: background 0.3s;
      margin-top: 5px;
    }
    .clear-history:hover { background: #c0392b; }
    /* Ù†Ø§ÙØ°Ø© Ø­ÙˆÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… */
    .modal {
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 200;
    }
    .modal.active { display: flex; }
    .modal-content {
      background: #fff;
      color: #333;
      padding: 30px;
      border-radius: 10px;
      width: 90%;
      max-width: 500px;
      text-align: right;
      position: relative;
      white-space: pre-wrap;
    }
    .modal-content h2 {
      margin-bottom: 15px;
      color: #2c3e50;
    }
    .modal-content p {
      font-size: 1em;
      line-height: 1.5;
    }
    .modal-close {
      position: absolute;
      top: 10px;
      left: 10px;
      background: #e74c3c;
      color: #fff;
      border: none;
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.9em;
    }
    /* Ø²Ø± ØªÙ†Ø²ÙŠÙ„ Ø§Ù„ØªÙ‚ÙˆÙŠÙ… */
    .download-btn {
      background: #3498db;
      color: #fff;
      border: none;
      padding: 10px 20px;
      margin-top: 15px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1em;
      transition: background 0.3s;
    }
    .download-btn:hover {
      background: #2980b9;
    }
    /* Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„ØªØµÙ…ÙŠÙ… */
    @media (max-width: 768px) {
      header h1 { font-size: 2em; }
      nav button { font-size: 0.9em; padding: 8px 16px; }
      h2 { font-size: 1.8em; }
      .input-group input, .input-group select { width: 90%; }
      .action-btn, .reset-btn { font-size: 0.9em; padding: 10px 20px; }
      .result-box { font-size: 1.1em; }
    }
    @media (max-width: 480px) {
      header h1 { font-size: 1.6em; }
      nav button { font-size: 0.8em; padding: 6px 12px; }
      h2 { font-size: 1.5em; }
      .input-group input, .input-group select { width: 95%; }
      .action-btn, .reset-btn { font-size: 0.8em; padding: 8px 16px; }
      .result-box { font-size: 1em; }
    }
  </style>
</head>
<body>
  <header>
    <h1 id="current-bidalizi" class="highlight">
      ğŸ”¹ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠ Ù„Ù„ÙŠÙˆÙ…: <span id="current-bidalizi-text"></span>
    </h1>
    <nav>
      <button id="tab-m2b" class="active" onclick="showTab('m2b')">Ù…Ù† Ù…ÙŠÙ„Ø§Ø¯ÙŠ Ø¥Ù„Ù‰ Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠ</button>
      <button id="tab-b2m" onclick="showTab('b2m')">Ù…Ù† Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠ Ø¥Ù„Ù‰ Ù…ÙŠÙ„Ø§Ø¯ÙŠ</button>
      <button onclick="openModal()">Ø­ÙˆÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…</button>
      <button class="download-btn" onclick="downloadCalendar()">ØªÙ†Ø²ÙŠÙ„ Ø§Ù„ØªÙ‚ÙˆÙŠÙ…</button>
    </nav>
  </header>
  <main>
    <!-- ØªØ¨ÙˆÙŠØ¨ ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ù…Ù† Ù…ÙŠÙ„Ø§Ø¯ÙŠ Ø¥Ù„Ù‰ Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠ -->
    <section id="m2b" class="tab active">
      <div class="container">
        <h2>ğŸ”„ ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ Ø¥Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠ</h2>
        <div class="input-group">
          <label for="gregorian-date" title="Ø§Ø®ØªØ± Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ">ğŸ“† Ø£Ø¯Ø®Ù„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ:</label>
          <input type="date" id="gregorian-date">
        </div>
        <div>
          <button class="action-btn" onclick="convertToBidalizi()">ØªØ­ÙˆÙŠÙ„</button>
          <button class="reset-btn" onclick="resetGregorian()">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
        </div>
        <div class="result-box" id="result">
          <em>Ø³ØªØ¸Ù‡Ø± Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù‡Ù†Ø§...</em>
          <button class="copy-btn" onclick="copyResult('result')">Ù†Ø³Ø®</button>
        </div>
        <div class="history" id="history-m2b">
          <h3>Ø³Ø¬Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª</h3>
          <button class="clear-history" onclick="clearHistory('history-m2b')">Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„</button>
        </div>
      </div>
    </section>

    <!-- ØªØ¨ÙˆÙŠØ¨ ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ù…Ù† Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠ Ø¥Ù„Ù‰ Ù…ÙŠÙ„Ø§Ø¯ÙŠ -->
    <section id="b2m" class="tab">
      <div class="container">
        <h2>ğŸ”„ ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ</h2>
        <div class="input-group">
          <label for="bidalizi-year" title="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠØ©">ğŸ“… Ø£Ø¯Ø®Ù„ Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠØ©:</label>
          <input type="number" id="bidalizi-year" placeholder="Ù…Ø«Ù„Ø§Ù‹: 10">
        </div>
        <div class="input-group">
          <label for="bidalizi-month" title="Ø§Ø®ØªØ± Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠ">ğŸ—“ Ø§Ø®ØªØ± Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠ:</label>
          <select id="bidalizi-month">
            <option value="0">Ø§Ù„ØªØ§Ø±Ø¯ÙŠ</option>
            <option value="1">Ø§Ù„Ù…Ø§Ø±ÙƒÙŠØ¯ÙŠ</option>
            <option value="2">Ø§Ù„ØªÙˆØ±Ø¯Ø§ÙŠÙƒÙŠ</option>
            <option value="3">Ø§Ù„ÙƒØ§ÙŠØ¯Ø§Ø±ÙƒÙŠ</option>
            <option value="4">Ø§Ù„Ù…ÙŠÙƒØ¯ÙŠ</option>
            <option value="5">Ø§Ù„ÙØ§ÙŠØ¯Ø±Ø¯ÙŠÙƒÙŠ</option>
            <option value="6">Ø§Ù„Ù‡Ø§ÙŠØ¯Ø±Ø¯ÙŠØ±</option>
            <option value="7">Ø§Ù„Ù†ÙˆØ±Ø¯Ø±Ø¯ÙŠØ±</option>
            <option value="8">Ø§Ù„Ø±Ø§Ø²ÙŠØ¯Ø²ÙŠ</option>
          </select>
        </div>
        <div class="input-group">
          <label for="bidalizi-day" title="Ø£Ø¯Ø®Ù„ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠ: Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø´Ù‡Ø± Ù…Ù† 1-8 ÙŠÙƒÙˆÙ† 1-45ØŒ ÙˆØ¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø´Ù‡Ø± 9 ÙŠÙƒÙˆÙ† 1-47">ğŸ—“ Ø§Ø®ØªØ± Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠ:</label>
          <input type="number" id="bidalizi-day" placeholder="Ù…Ø«Ù„Ø§Ù‹: 5">
        </div>
        <div>
          <button class="action-btn" onclick="convertToGregorian()">ØªØ­ÙˆÙŠÙ„</button>
          <button class="reset-btn" onclick="resetBidalizi()">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
        </div>
        <div class="result-box" id="reverse-result">
          <em>Ø³ØªØ¸Ù‡Ø± Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù‡Ù†Ø§...</em>
          <button class="copy-btn" onclick="copyResult('reverse-result')">Ù†Ø³Ø®</button>
        </div>
        <div class="history" id="history-b2m">
          <h3>Ø³Ø¬Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª</h3>
          <button class="clear-history" onclick="clearHistory('history-b2m')">Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„</button>
        </div>
      </div>
    </section>
  </main>

  <!-- Ù†Ø§ÙØ°Ø© Ø­ÙˆÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØªÙ†Ø²ÙŠÙ„ Ø§Ù„ØªÙ‚ÙˆÙŠÙ… -->
  <div class="modal" id="about-modal">
    <div class="modal-content">
      <button class="modal-close" onclick="closeModal()">Ø¥ØºÙ„Ø§Ù‚</button>
      <h2>Ø­ÙˆÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØ§Ù„ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠ</h2>
      <p>
        ÙŠØ¹ØªÙ…Ø¯ Ù†Ø¸Ø§Ù… "Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠ" Ø¹Ù„Ù‰ Ø¨Ø¯Ø§ÙŠØ© Ù…Ø­Ø¯Ø¯Ø© (8 Ù…Ø§ÙŠÙˆ 2010 Ù…ÙŠÙ„Ø§Ø¯ÙŠ) ÙˆÙŠÙÙ‚Ø³ÙÙ‘Ù… Ø§Ù„Ø³Ù†Ø© Ø¥Ù„Ù‰ 407 ÙŠÙˆÙ…Ù‹Ø§.
        ØªÙÙˆØ²ÙÙ‘Ø¹ Ø§Ù„Ø£ÙŠØ§Ù… Ø¹Ù„Ù‰ 9 Ø£Ø´Ù‡Ø± Ø¨Ø­ÙŠØ« ÙŠÙƒÙˆÙ† Ù„Ù„Ø´Ù‡ÙˆØ± 1-8 45 ÙŠÙˆÙ…Ù‹Ø§ ÙˆÙ„ÙƒÙ„ Ø´Ù‡Ø± 9 47 ÙŠÙˆÙ…Ù‹Ø§.
        Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ 14 ÙŠÙˆÙ…Ù‹Ø§ØŒ ÙˆØªÙØ­Ø¯ÙÙ‘Ø¯ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø£ÙŠØ§Ù… ÙƒÙ…Ø§ Ù‡Ùˆ Ù…Ø¹Ø±Ù ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù….
        <br><br>
        ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø¯Ø§Ø© Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØªÙˆØ§Ø±ÙŠØ® Ø¨ÙŠÙ† Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ ÙˆØ§Ù„Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠØŒ
        ÙƒÙ…Ø§ ÙŠÙ…ÙƒÙ†Ùƒ ØªÙ†Ø²ÙŠÙ„ ØªÙ‚ÙˆÙŠÙ… ÙƒØ§Ù…Ù„ Ù„Ø¹Ø§Ù… Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠ Ù…Ø¹ ØªÙ†Ø³ÙŠÙ‚ ÙŠØ´Ø¨Ù‡ Ø§Ù„ØªÙ‚ÙˆÙŠÙ…Ø§Øª Ø§Ù„Ù‡Ø§Ø¯Ø¦Ø©.
      </p>
    </div>
  </div>

  <script>
    // ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø£Ø´Ù‡Ø± ÙˆØ§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠØ©
    const bidaliziMonths = [
      "Ø§Ù„ØªØ§Ø±Ø¯ÙŠ", "Ø§Ù„Ù…Ø§Ø±ÙƒÙŠØ¯ÙŠ", "Ø§Ù„ØªÙˆØ±Ø¯Ø§ÙŠÙƒÙŠ", "Ø§Ù„ÙƒØ§ÙŠØ¯Ø§Ø±ÙƒÙŠ", "Ø§Ù„Ù…ÙŠÙƒØ¯ÙŠ", 
      "Ø§Ù„ÙØ§ÙŠØ¯Ø±Ø¯ÙŠÙƒÙŠ", "Ø§Ù„Ù‡Ø§ÙŠØ¯Ø±Ø¯ÙŠØ±", "Ø§Ù„Ù†ÙˆØ±Ø¯Ø±Ø¯ÙŠØ±", "Ø§Ù„Ø±Ø§Ø²ÙŠØ¯Ø²ÙŠ"
    ];
    const bidaliziDays = [
      "Ø§Ù„ØªØ§Ø¬ÙŠÙƒÙŠ", "Ø§Ù„Ø±Ø§Ø¬ÙŠÙƒÙŠ", "Ø§Ù„ÙƒØ§Ù„Ø¬ÙŠÙƒÙŠ", "Ø§Ù„ÙˆØ§Ø¬ÙŠÙƒÙŠ", "Ø§Ù„ÙØ§Ø¬ÙŠÙƒÙŠ", 
      "Ø§Ù„Ù†Ø§Ø¬ÙŠÙƒÙŠ", "Ø§Ù„Ø³Ø§Ø¬ÙŠÙƒÙŠ", "Ø§Ù„ÙØ§Ù„Ø¯ÙŠÙƒÙŠ", "Ø§Ù„ÙˆØ§Ø±Ø¯ÙŠÙƒÙŠ", "Ù‡Ø§ÙŠØ±Ø¯ÙŠØ²ÙŠ", 
      "ÙØ§ÙŠØ¯ÙŠØ±Ø¯ÙŠ", "ÙƒØ§ÙŠØ¨ÙŠØ±Ø¯ÙŠ", "Ø°Ø§ÙŠØ¯ÙŠÙƒÙŠ", "Ù…Ø§ÙŠØ¯ÙŠÙƒÙ‡ÙŠ"
    ];
    // ØªÙˆØ²ÙŠØ¹ Ø«Ø§Ø¨Øª Ù„Ù„Ø³Ù†Ø©: Ø§Ù„Ø´Ù‡ÙˆØ± 1-8: 45 ÙŠÙˆÙ…ØŒ Ø§Ù„Ø´Ù‡Ø± 9: 47 ÙŠÙˆÙ…
    const DAYS_IN_YEAR = 407;
    const DAYS_IN_MONTHS = [45,45,45,45,45,45,45,45,47];

    // Ø¯Ø§Ù„Ø© Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£ÙŠØ§Ù… Ø¨ÙŠÙ† ØªØ§Ø±ÙŠØ®ÙŠÙ†
    function daysBetween(date1, date2) {
      const oneDay = 1000 * 60 * 60 * 24;
      return Math.floor((date2 - date1) / oneDay);
    }

    // ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ Ø¥Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠ
    function convertToBidalizi() {
      const inputDate = new Date(document.getElementById("gregorian-date").value);
      const startBidalizi = new Date(2010, 4, 8); // 8 Ù…Ø§ÙŠÙˆ 2010
      if (isNaN(inputDate)) {
        document.getElementById("result").innerHTML = "<span style='color:red;'>âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ØªØ§Ø±ÙŠØ® Ù…ÙŠÙ„Ø§Ø¯ÙŠ ØµØ§Ù„Ø­.</span>";
        return;
      }
      let totalDays = daysBetween(startBidalizi, inputDate);
      let bidaliziYear = Math.floor(totalDays / DAYS_IN_YEAR);
      let remainingDays = totalDays % DAYS_IN_YEAR;
      let month = 0, day = 0;
      // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø´Ù‡Ø± ÙˆØ§Ù„ÙŠÙˆÙ… Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ØªÙˆØ²ÙŠØ¹ Ø«Ø§Ø¨Øª
      for (let i = 0; i < DAYS_IN_MONTHS.length; i++) {
        if (remainingDays < DAYS_IN_MONTHS[i]) {
          month = i;
          day = remainingDays + 1;
          break;
        } else {
          remainingDays -= DAYS_IN_MONTHS[i];
        }
      }
      const dayName = bidaliziDays[(totalDays) % 14];
      const resultHTML = `
        ğŸ“† Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠ: <span class="highlight">${dayName}, ${day} ${bidaliziMonths[month]} Ø³Ù†Ø© ${bidaliziYear}</span><br>
        ğŸ· Ø¨Ø§Ù„Ø£Ø±Ù‚Ø§Ù…: <span class="highlight">${day}/${month+1}/${bidaliziYear}</span>`;
      document.getElementById("result").innerHTML = resultHTML;
      addHistory("history-m2b", resultHTML);
    }

    // ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ
    function convertToGregorian() {
      const year = parseInt(document.getElementById("bidalizi-year").value);
      const month = parseInt(document.getElementById("bidalizi-month").value);
      const day = parseInt(document.getElementById("bidalizi-day").value);
      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„Ø§Øª
      if (isNaN(year) || isNaN(month) || isNaN(day)) {
        document.getElementById("reverse-result").innerHTML = "<span style='color:red;'>âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„.</span>";
        return;
      }
      const maxDay = (month < 8) ? 45 : 47;
      if (day < 1 || day > maxDay) {
        document.getElementById("reverse-result").innerHTML = `<span style='color:red;'>âŒ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„ÙŠÙˆÙ… Ù…Ù† 1 Ø¥Ù„Ù‰ ${maxDay}.</span>`;
        return;
      }
      // Ø­Ø³Ø§Ø¨ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£ÙŠØ§Ù… Ù…Ù†Ø° Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
      let totalDays = year * DAYS_IN_YEAR;
      for (let i = 0; i < month; i++) {
        totalDays += DAYS_IN_MONTHS[i];
      }
      totalDays += day - 1;
      const startBidalizi = new Date(2010, 4, 8);
      const gregorianDate = new Date(startBidalizi.getTime() + totalDays * 1000 * 60 * 60 * 24);
      const resultText = `ğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ: <span class="highlight">${gregorianDate.toLocaleDateString()}</span>`;
      document.getElementById("reverse-result").innerHTML = resultText;
      addHistory("history-b2m", resultText);
    }

    // Ø¹Ø±Ø¶ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠ Ù„Ù„ÙŠÙˆÙ…
    function displayCurrentBidalizi() {
      const today = new Date();
      const startBidalizi = new Date(2010, 4, 8);
      let totalDays = daysBetween(startBidalizi, today);
      let bidaliziYear = Math.floor(totalDays / DAYS_IN_YEAR);
      let remainingDays = totalDays % DAYS_IN_YEAR;
      let month = 0, day = 0;
      for (let i = 0; i < DAYS_IN_MONTHS.length; i++) {
        if (remainingDays < DAYS_IN_MONTHS[i]) {
          month = i;
          day = remainingDays + 1;
          break;
        } else {
          remainingDays -= DAYS_IN_MONTHS[i];
        }
      }
      const dayName = bidaliziDays[totalDays % 14];
      document.getElementById("current-bidalizi-text").innerHTML = 
          `${dayName}, ${day} ${bidaliziMonths[month]} Ø³Ù†Ø© ${bidaliziYear}`;
    }

    // Ø¯Ø§Ù„Ø© Ù„Ù†Ø³Ø® Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ø­Ø¯Ø¯ (Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙÙ‚Ø·)
    function copyResult(elementId) {
      const text = document.getElementById(elementId).innerText;
      navigator.clipboard.writeText(text)
        .then(() => alert("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù†ØªÙŠØ¬Ø©!"))
        .catch(err => alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù†Ø³Ø®."));
    }

    // Ø¥Ø¶Ø§ÙØ© Ø³Ø¬Ù„ Ø¹Ù…Ù„ÙŠØ© ØªØ­ÙˆÙŠÙ„
    function addHistory(historyId, text) {
      const historyContainer = document.getElementById(historyId);
      const entry = document.createElement("div");
      entry.className = "history-entry";
      entry.innerHTML = text;
      historyContainer.insertBefore(entry, historyContainer.children[1]);
    }

    // Ù…Ø³Ø­ Ø³Ø¬Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª
    function clearHistory(historyId) {
      const historyContainer = document.getElementById(historyId);
      historyContainer.querySelectorAll(".history-entry").forEach(entry => entry.remove());
    }

    // Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
    function showTab(tabId) {
      document.querySelectorAll(".tab").forEach(tab => tab.classList.remove("active"));
      document.getElementById(tabId).classList.add("active");
      document.querySelectorAll("nav button").forEach(btn => btn.classList.remove("active"));
      document.getElementById("tab-" + tabId).classList.add("active");
    }

    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ
    function resetGregorian() {
      document.getElementById("gregorian-date").value = "";
      document.getElementById("result").innerHTML = "<em>Ø³ØªØ¸Ù‡Ø± Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù‡Ù†Ø§...</em><button class='copy-btn' onclick=\"copyResult('result')\">Ù†Ø³Ø®</button>";
    }

    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠ
    function resetBidalizi() {
      document.getElementById("bidalizi-year").value = "";
      document.getElementById("bidalizi-month").value = "0";
      document.getElementById("bidalizi-day").value = "";
      document.getElementById("reverse-result").innerHTML = "<em>Ø³ØªØ¸Ù‡Ø± Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù‡Ù†Ø§...</em><button class='copy-btn' onclick=\"copyResult('reverse-result')\">Ù†Ø³Ø®</button>";
    }

    // ÙØªØ­ Ù†Ø§ÙØ°Ø© "Ø­ÙˆÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…"
    function openModal() {
      document.getElementById("about-modal").classList.add("active");
    }
    function closeModal() {
      document.getElementById("about-modal").classList.remove("active");
    }

    // Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚ÙˆÙŠÙ… Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠ Ù„Ø¹Ø§Ù… Ù…Ø¹ÙŠÙ† Ø¨ØµÙŠØºØ© Ù†ØµÙŠØ© Ù…Ù†Ù…Ù‚Ø©
    function generateCalendar(year) {
      let calendarText = `ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠØ© ${year}\n`;
      calendarText += "========================================\n\n";
      for (let m = 0; m < 9; m++) {
        const monthName = bidaliziMonths[m];
        let daysInThisMonth = (m < 8) ? 45 : 47;
        calendarText += `Ø§Ù„Ø´Ù‡Ø± ${m+1} - ${monthName} (${daysInThisMonth} ÙŠÙˆÙ…)\n`;
        calendarText += bidaliziDays.join(" | ") + "\n";
        calendarText += "----------------------------------------\n";
        // ØªØ±ØªÙŠØ¨ Ø§Ù„Ø£ÙŠØ§Ù… ÙÙŠ Ø£Ø³Ø§Ø¨ÙŠØ¹ Ù…Ù† 14 ÙŠÙˆÙ…
        for (let d = 1; d <= daysInThisMonth; d++) {
          let dayName = bidaliziDays[( (year * DAYS_IN_YEAR) + (m < 8 ? m*45 : 8*45) + d - 1 ) % 14];
          calendarText += d.toString().padStart(2, ' ') + " (" + dayName + ")  ";
          if (d % 14 === 0) calendarText += "\n";
        }
        calendarText += "\n========================================\n\n";
      }
      return calendarText;
    }

    // ØªÙ†Ø²ÙŠÙ„ Ø§Ù„ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠ Ù„Ø¹Ø§Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ (Ø­Ø³Ø¨ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø§Ù„ÙŠ)
    function downloadCalendar() {
      // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
      const today = new Date();
      const startBidalizi = new Date(2010, 4, 8);
      const totalDays = daysBetween(startBidalizi, today);
      const currentYear = Math.floor(totalDays / DAYS_IN_YEAR);
      const calendarText = generateCalendar(currentYear);
      const blob = new Blob([calendarText], { type: "text/plain;charset=utf-8" });
      const url = URL.createObjectURL(blob);
      const link = document.createElement("a");
      link.href = url;
      link.download = `ØªÙ‚ÙˆÙŠÙ…_Ø§Ù„Ø³Ù†Ø©_Ø§Ù„Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠØ©_${currentYear}.txt`;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    }

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨ÙŠØ¯Ø§Ù„ÙŠØ²ÙŠ Ù„Ù„ÙŠÙˆÙ… Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    displayCurrentBidalizi();
  </script>
</body>
</html>
